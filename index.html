<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ¸…é‚ âœˆ æ›¼è°· å†’éšªåœ°åœ–</title>

<style>
body {
  margin: 0;
  padding: 0;
  background: #000;
  overflow: hidden;
  text-align: center;
  color: white;
  font-family: "å¾®è»Ÿæ­£é»‘é«”";
}

/* === åœ°åœ–å®¹å™¨ === */
#map-container {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* === åœ°åœ–æ¨£å¼ === */
.map {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: all 1s ease;
}

/* æ›¼è°·ç¸®å°åœ–ï¼ˆå³ä¸‹è§’ï¼‰ */
.map.mini {
  width: 25vw;
  height: 25vw;
  bottom: 5vw;
  right: 5vw;
  border-radius: 10px;
  box-shadow: 0 0 10px #000;
  z-index: 2;
}

/* ç›®å‰é¡¯ç¤ºåœ°åœ– */
.map.active {
  z-index: 1;
}

/* === ç©å®¶è§’è‰² === */
#player {
  position: absolute;
  width: 10vw;
  transition: all 0.2s linear;
  z-index: 3;
}

/* === æ‰‹æ©Ÿç‰ˆæ§åˆ¶éµ === */
#controls {
  position: fixed;
  bottom: 5vh;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-wrap: wrap;
  width: 40vw;
  justify-content: center;
  gap: 1vw;
  z-index: 5;
}
#controls button {
  width: 10vw;
  height: 10vw;
  font-size: 5vw;
  border-radius: 50%;
  border: none;
  background: rgba(255,255,255,0.3);
  color: white;
  font-weight: bold;
}
</style>
</head>

<body>

<!-- === åœ°åœ–èˆ‡è§’è‰² === -->
<div id="map-container">
  <img id="background1" src="img/chiangmai_map.png" class="map active" />
  <img id="background2" src="img/bangkok_map.png" class="map mini" />
  <img id="player" src="img/character.png" alt="player" />
</div>

<!-- === æ§åˆ¶éµ === -->
<div id="controls" style="display: none;">
  <button id="up">â†‘</button>
  <button id="left">â†</button>
  <button id="down">â†“</button>
  <button id="right">â†’</button>
</div>

<script>
// ğŸŸ¢ åƒ…æ‰‹æ©Ÿå•Ÿç”¨åœ°åœ–äº’å‹•æ¨¡å¼
if (/Mobi|Android/i.test(navigator.userAgent)) {
  const player = document.getElementById('player');
  const map1 = document.getElementById('background1');
  const map2 = document.getElementById('background2');
  const controls = document.getElementById('controls');

  controls.style.display = 'flex'; // é¡¯ç¤ºæ§åˆ¶éµ

  let x = 50; // äººç‰©ä½ç½® (vw)
  let y = 50; // äººç‰©ä½ç½® (vh)
  let currentMap = 1;
  let flying = false;

  function updatePosition() {
    player.style.left = x + 'vw';
    player.style.top = y + 'vh';
  }
  updatePosition();

  // === æ§åˆ¶ç§»å‹• ===
  document.getElementById('up').onclick = () => move(0, -2);
  document.getElementById('down').onclick = () => move(0, 2);
  document.getElementById('left').onclick = () => move(-2, 0);
  document.getElementById('right').onclick = () => move(2, 0);

  function move(dx, dy) {
    if (flying) return;

    x += dx;
    y += dy;
    updatePosition();

    // æª¢æŸ¥æ˜¯å¦èµ°å‡ºæ¸…é‚åœ°åœ–ç¯„åœ
    if (currentMap === 1 && (x < 0 || x > 100 || y < 0 || y > 100)) {
      flyToBangkok();
    }
  }

  // === é£›æ©Ÿå‹•ç•« + åœ°åœ–åˆ‡æ› ===
  function flyToBangkok() {
    flying = true;
    player.src = "img/airplane.png";
    player.style.transition = "all 2s ease-in-out";

    // é£›å¾€å³ä¸‹è§’ (æ›¼è°·å°åœ–ä½ç½®)
    player.style.left = "75vw";
    player.style.top = "75vh";

    setTimeout(() => {
      // æ¸…é‚æ¶ˆå¤±ã€æ›¼è°·æ”¾å¤§
      map1.classList.remove("active");
      map2.classList.remove("mini");
      map2.classList.add("active");

      // é‡ç½®è§’è‰²
      player.src = "img/character.png";
      player.style.transition = "none";
      x = 50; 
      y = 50;
      updatePosition();

      currentMap = 2;
      flying = false;
    }, 2000);
  }
}
</script>

</body>
</html>
